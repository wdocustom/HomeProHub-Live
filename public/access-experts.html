<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HomeProHub – Access Experts</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .experts-container { max-width: 900px; margin: 40px auto; padding: 0 24px; }
    .header-card { background: white; padding: 24px; border-radius: 12px; margin-bottom: 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .expert-options { display: grid; gap: 20px; margin-bottom: 24px; }
    .expert-card { background: white; padding: 28px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-top: 4px solid #e5e7eb; }
    .expert-card.tier-starter { border-top-color: #4ade80; }
    .expert-card.tier-pro { border-top-color: #60a5fa; }
    .expert-card.tier-elite { border-top-color: #c4b5fd; }
    .tier-badge { display: inline-block; padding: 4px 12px; border-radius: 999px; font-size: 12px; font-weight: 600; margin-bottom: 12px; }
    .tier-badge.starter { background: #ecfdf5; color: #166534; }
    .tier-badge.pro { background: #eff6ff; color: #1d4ed8; }
    .tier-badge.elite { background: #f5f3ff; color: #5b21b6; }
    .expert-card h3 { margin-top: 0; margin-bottom: 8px; font-size: 20px; }
    .expert-card p { color: #6b7280; margin-bottom: 16px; font-size: 14px; }
    .expert-card .features { list-style: none; padding: 0; margin: 16px 0; }
    .expert-card .features li { padding: 8px 0; padding-left: 24px; position: relative; color: #4b5563; font-size: 14px; }
    .expert-card .features li::before { content: '✓'; position: absolute; left: 0; color: #10b981; font-weight: 700; }
  </style>
</head>
<body>
<header class="navbar">
  <div class="nav-inner">
    <div class="brand-area">
      <div class="brand-logo">H</div>
      <div class="brand-name">HomeProHub</div>
    </div>
    <div class="nav-links">
      <a href="contractor.html">Dashboard</a>
      <a href="contractor-profile.html">Profile</a>
      <div class="profile-area">
        <button class="logout-btn" onclick="logout()">Logout</button>
      </div>
    </div>
  </div>
</header>

<div class="experts-container">
  <div class="header-card">
    <h1 style="margin: 0 0 8px 0; font-size: 28px;">Access to Experts</h1>
    <p style="margin: 0; color: #6b7280;">Get specialized help from architects, engineers, designers, and business coaches when projects get complex</p>
  </div>

  <div class="expert-options">
    <div class="expert-card tier-starter">
      <span class="tier-badge starter">Starter Tier</span>
      <h3>Email an Expert</h3>
      <p>Submit your question via form and get a detailed response within 24-48 hours</p>
      <ul class="features">
        <li>Detailed project questions</li>
        <li>Technical guidance</li>
        <li>Business strategy advice</li>
        <li>Response within 48 hours</li>
      </ul>
      <button class="btn-primary" onclick="showEmailForm()">Contact via Email</button>
    </div>

    <div class="expert-card tier-pro">
      <span class="tier-badge pro">Pro Tier</span>
      <h3>Text an Expert</h3>
      <p>Get quick answers via text message - perfect for urgent questions on the job site</p>
      <ul class="features">
        <li>Urgent technical questions</li>
        <li>Quick decision support</li>
        <li>Response within minutes</li>
        <li>Available during business hours</li>
      </ul>
      <button class="btn-primary" onclick="showTextForm()">Text an Expert</button>
    </div>

    <div class="expert-card tier-elite">
      <span class="tier-badge elite">Elite Tier</span>
      <h3>Voice/Video Call Expert</h3>
      <p>Schedule a live call with a specialist to walk through complex projects together</p>
      <ul class="features">
        <li>30-minute consultation sessions</li>
        <li>Screen share & visual walkthroughs</li>
        <li>Complex problem solving</li>
        <li>Personalized business coaching</li>
      </ul>
      <button class="btn-primary" onclick="showCallScheduler()">Schedule a Call</button>
    </div>
  </div>

  <div id="formSection" style="display: none;">
    <div class="header-card">
      <h2 style="margin: 0 0 16px 0;" id="formTitle"></h2>
      <form id="expertForm">
        <div id="formFields"></div>
        <button type="submit" class="btn-primary" id="submitBtn">Submit Request</button>
        <button type="button" class="btn-secondary" onclick="closeForm()" style="margin-left: 12px;">Cancel</button>
        <div id="status" style="margin-top: 12px; font-size: 14px;"></div>
      </form>
    </div>
  </div>
</div>

<script>
const STORAGE_KEYS = {
  AUTH_TOKEN: 'homeprohub_auth_token',
  USERNAME: 'homeprohub_username',
  USER_ROLE: 'homeprohub_user_role',
  CONTRACTOR_PROFILE: 'homeprohub_contractor_profile'
};

function logout() {
  Object.values(STORAGE_KEYS).forEach(key => localStorage.removeItem(key));
  window.location.href = 'index.html';
}

function checkAuth() {
  const token = localStorage.getItem(STORAGE_KEYS.AUTH_TOKEN);
  const role = localStorage.getItem(STORAGE_KEYS.USER_ROLE);
  if (!token || role !== 'contractor') {
    window.location.href = 'index.html';
    return false;
  }
  return true;
}

function showEmailForm() {
  document.getElementById('formTitle').textContent = 'Email an Expert';
  document.getElementById('formFields').innerHTML = `
    <div class="form-group">
      <label for="expertType">Expert Type</label>
      <select id="expertType" required>
        <option value="">Select expert...</option>
        <option value="architect">Architect</option>
        <option value="engineer">Structural Engineer</option>
        <option value="designer">Interior Designer</option>
        <option value="gc">General Contractor / Project Manager</option>
        <option value="business">Business Coach</option>
      </select>
    </div>
    <div class="form-group">
      <label for="subject">Subject</label>
      <input id="subject" type="text" placeholder="Brief description of your question" required />
    </div>
    <div class="form-group">
      <label for="details">Details</label>
      <textarea id="details" rows="6" placeholder="Provide detailed information about your project and question..." required></textarea>
    </div>
  `;
  document.getElementById('formSection').style.display = 'block';
  document.getElementById('formSection').scrollIntoView({ behavior: 'smooth' });
}

function showTextForm() {
  document.getElementById('formTitle').textContent = 'Text an Expert (Pro Tier)';
  document.getElementById('formFields').innerHTML = `
    <div class="form-group">
      <label for="phoneNumber">Your Phone Number</label>
      <input id="phoneNumber" type="tel" placeholder="(555) 123-4567" required />
    </div>
    <div class="form-group">
      <label for="urgency">Urgency Level</label>
      <select id="urgency" required>
        <option value="immediate">Immediate (on job site now)</option>
        <option value="today">Needed today</option>
        <option value="soon">Within 24 hours</option>
      </select>
    </div>
    <div class="form-group">
      <label for="question">Question</label>
      <textarea id="question" rows="4" placeholder="What do you need help with?" required></textarea>
    </div>
  `;
  document.getElementById('formSection').style.display = 'block';
  document.getElementById('formSection').scrollIntoView({ behavior: 'smooth' });
}

function showCallScheduler() {
  document.getElementById('formTitle').textContent = 'Schedule Expert Call (Elite Tier)';
  document.getElementById('formFields').innerHTML = `
    <div class="form-group">
      <label for="callType">Call Type</label>
      <select id="callType" required>
        <option value="">Select...</option>
        <option value="voice">Voice Call</option>
        <option value="video">Video Call</option>
      </select>
    </div>
    <div class="form-group">
      <label for="expertSpecialty">Expert Specialty</label>
      <select id="expertSpecialty" required>
        <option value="">Select expert...</option>
        <option value="architect">Architect</option>
        <option value="engineer">Structural Engineer</option>
        <option value="mechanical">Mechanical Engineer</option>
        <option value="designer">Interior Designer</option>
        <option value="business">Business Coach</option>
        <option value="gc">Senior General Contractor</option>
      </select>
    </div>
    <div class="form-group">
      <label for="preferredDate">Preferred Date</label>
      <input id="preferredDate" type="date" required />
    </div>
    <div class="form-group">
      <label for="preferredTime">Preferred Time</label>
      <select id="preferredTime" required>
        <option value="">Select time...</option>
        <option value="morning">Morning (8AM - 12PM)</option>
        <option value="afternoon">Afternoon (12PM - 5PM)</option>
        <option value="evening">Evening (5PM - 8PM)</option>
      </select>
    </div>
    <div class="form-group">
      <label for="callReason">What will we discuss?</label>
      <textarea id="callReason" rows="4" placeholder="Describe the project or issue you need help with..." required></textarea>
    </div>
  `;
  document.getElementById('formSection').style.display = 'block';
  document.getElementById('formSection').scrollIntoView({ behavior: 'smooth' });
}

function closeForm() {
  document.getElementById('formSection').style.display = 'none';
  document.getElementById('expertForm').reset();
  document.getElementById('status').textContent = '';
}

document.getElementById('expertForm').addEventListener('submit', function(e) {
  e.preventDefault();
  
  const submitBtn = document.getElementById('submitBtn');
  const status = document.getElementById('status');
  
  submitBtn.disabled = true;
  submitBtn.textContent = 'Submitting...';
  status.textContent = 'Processing your request...';
  status.style.color = '#6b7280';

  setTimeout(() => {
    status.textContent = 'Request submitted successfully! An expert will contact you soon.';
    status.style.color = '#10b981';
    submitBtn.disabled = false;
    submitBtn.textContent = 'Submit Request';
    
    setTimeout(() => {
      closeForm();
    }, 2000);
  }, 1500);
});

if (!checkAuth()) return;
</script>
</body>
</html>
